<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>hjdmmm的博客</title>
    <link href="../css/global.css" rel="stylesheet" type="text/css">
    <style>
        .content .center {
            width: 78%;
            float: left;
        }

        .article-board-div {
            display: inline-block;
        }

        .article-board-title {
            font-size: 14px;
            font-weight: 500;
            margin-top: 10px;
            border-bottom: 1px solid #d3d3d3;
        }

        .article {
            background-color: white;
            min-width: 470px;
            max-width: 700px;
            list-style: none;
            word-wrap: break-word;
        }

        .article span {
            color: #555;
            font-size: 14px;
        }

        .article a {
            color: #444;
            text-decoration: none;
        }

        .article a:hover {
            text-decoration: underline;
            color: #654;
        }

        .content .right-side {
            float: right;
            width: 20%;
            margin-top: 20px;
            overflow: hidden;
            border-radius: 20px;
            border: 1px solid #d3d3d3;
        }

        .content .right-side h1 {
            font-size: 16px;
            font-weight: 500;
            padding: 0 0 0.2em 0.6em;
            border-bottom: 1px solid #d3d3d3;
        }

        .content .right-side ul {
            margin-top: 0px;
        }

        .content .right-side li {
            font-size: 14px;
            line-height: 220%;
            text-decoration: underline;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <span>hjdmmm的博客</span>
        <span class="article_search">
            <a href="./index.html">首页</a>
            <a href="./category.html">分类</a>
            <input size="20" type="text" disabled>
            <input type="button" value="搜索" disabled>
        </span>
    </div>
    <div class="content">
        <div class="center">
            <div class="article-board-div">
                <h1 class="article-board-title">最新文章</h1>
                <ul class="article-board" id="latest-article-board">
                </ul>
            </div>
            <div class="article-board-div">
                <h1 class="article-board-title">热门文章</h1>
                <ul class="article-board" id="hot-article-board">
                </ul>
            </div>
        </div>

        <div class="right-side">
            <h1>推荐的网站</h1>
            <ul id="link-list">
            </ul>
        </div>
    </div>
    <div class="footer">
        <p>
            <a href="https://gitee.com/hjdmmm" target="_blank">Gitee</a>
        </p>
        <p>Email: <a href="mailto:office404@qq.com" target="_blank">office404@qq.com</a></p>
    </div>
</div>
</body>
</html>

<script src="../js/ajax.js" type="text/javascript"></script>
<script src="../js/time.js" type="text/javascript"></script>
<script>
    const showHotArticleList = function (hotArticleList) {
        let hotArticleBoard = document.getElementById("hot-article-board");
        for (let hotArticle of hotArticleList) {
            const createTime = new Date(Date.parse(hotArticle.createTime));
            let hotArticleDiv = document.createElement("li");
            hotArticleDiv.className = "article";
            hotArticleDiv.innerHTML = `
                <span>
                    ${getChineseDate(createTime)} •
                    ${hotArticle.nickName} •
                    ${hotArticle.viewCount}次浏览
                </span>
                »
                <a href="article.html?id=${hotArticle.id}">${hotArticle.title}</a>
            `;
            hotArticleBoard.appendChild(hotArticleDiv);
        }
    }

    const showLatestArticleList = function (latestArticleList) {
        let latestArticleBoard = document.getElementById("latest-article-board");
        for (let latestArticle of latestArticleList) {
            const createTime = new Date(Date.parse(latestArticle.createTime));
            let latestArticleDiv = document.createElement("li");
            latestArticleDiv.className = "article";
            latestArticleDiv.innerHTML = `
                <span>
                    ${getChineseDate(createTime)} •
                    ${latestArticle.nickName} •
                    ${latestArticle.viewCount}次浏览
                </span>
                »
                <a href="article.html?id=${latestArticle.id}">${latestArticle.title}</a>
            `;
            latestArticleBoard.appendChild(latestArticleDiv);
        }
    }

    const showLinkList = function (linkList) {
        const linkListEle = document.getElementById("link-list");
        for (let link of linkList) {
            const linkEle = document.createElement("li");
            const linkA = document.createElement("a");
            linkEle.title = link.description;
            linkA.innerText = link.name;
            linkA.href = link.url;
            linkA.target = "_blank";
            linkEle.appendChild(linkA);
            linkListEle.appendChild(linkEle);
        }
    }

    window.onload = function () {
        ajax.get("article/hotArticleList", null, showHotArticleList);
        ajax.get("article/latestArticleList", null, showLatestArticleList);
        ajax.get("link/list", null, showLinkList);
    }
</script>